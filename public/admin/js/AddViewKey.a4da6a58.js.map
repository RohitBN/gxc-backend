{"version":3,"sources":["webpack:///./src/dto/ProductInfo.ts","webpack:///./src/components/AddViewKey/AddViewKey.vue","webpack:///./src/dto/KeyDetails.ts","webpack:///./src/components/AddViewKey/AddViewKey.ts","webpack:///./src/components/AddViewKey/AddViewKey.ts?98e3","webpack:///./src/components/AddViewKey/AddViewKey.vue?5f9e","webpack:///./src/components/AddViewKey/AddViewKey.vue?db8f"],"names":["ProductInfo","_createClass","_classCallCheck","_defineProperty","this","id","name","description","genre","languages","worksOn","enabled","inStock","videoId","headerImageUrl","platformDetails","sellerDetails","searchPhrase","hsnNumber","codAmount","mainCategory","subCategory","preOrderDate","toFirestore","expense","classToPlain","fromFirestore","snapshot","options","data","plainToClass","_vm","search","onProductChange","scopedSlots","fn","_c","proxy","key","attr","on","item","_ref","selected","attrs","domProps","_ref2","staticClass","callback","expression","isProductAvailable","sellerList","fetchKeys","_ref3","value","_ref4","_v","_ref6","editItem","click","$event","keyDialog","_s","model","editedItem","$set","staticRenderFns","KeyDetails","uuidv4","sellerInfoId","sellerId","productId","redeemedBy","orderId","sellerName","expiryDate","redeemedAt","cartItemId","_KeyDetails","AddViewKey","_Vue","_this","_len","arguments","length","args","Array","_key","_callSuper","concat","_assertThisInitialized","undefined","text","sortable","_inherits","_onPropertyChanged","_asyncToGenerator","_regeneratorRuntime","mark","_callee","oldValue","_this2","wrap","_context","prev","next","isProductLoading","FirestoreService","getdocsStartingWithKey","toLowerCase","converter","sent","empty","forEach","doc","searchItems","push","t0","Vue","toasted","show","message","icon","type","finish","stop","onPropertyChanged","_x","_x2","apply","_mounted","_callee2","_context2","console","log","mounted","_validateForm","_callee3","_context3","$refs","addSellerForm","validate","validateForm","reset","_fetchKeys","_callee4","_context4","getKeyDetails","_x3","_addKey","_callee5","_context5","selectedSeller","sellerInfo","selectedProduct","editIndex","addKey","$store","commit","_this$selectedProduct","filter","sellerDetail","productTypeOffered","keyList","_getKeyDetails","_callee6","_this3","_context6","isKeysLoading","firestore","collection","withConverter","where","limit","get","_this4","dialogDelete","$nextTick","_this5","splice","closeDelete","_save","_callee8","dateNow","auditfield","_auth$currentUser","_auth$currentUser2","_auth$currentUser3","_auth$currentUser4","_auth$currentUser5","_auth$currentUser6","_this6","_context8","form","Date","createdBy","uid","auth","currentUser","displayName","email","createdOn","getTime","auditTrail","updatedBy","updatedOn","runTransaction","_callee7","t","keyRef","_context7","set","merge","_x4","resetValidation","close","save","indexOf","Object","assign","_deleteItem","_callee9","res","deleteIndex","_context9","Swal","fire","title","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","isConfirmed","deleteDocument","deleteItem","_x5","__decorate","Watch","Component","component"],"mappings":"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","file":"js/AddViewKey.a4da6a58.js","sourcesContent":["import { classToPlain, plainToClass } from 'class-transformer';\r\nimport { AuditFields } from './AuditFields';\r\nimport { PlatformDetails } from './PlatformDetails';\r\nimport ProductImage from './ProductImage';\r\nimport SellerDetails from './SellerDetails';\r\n\r\nexport class ProductInfo {\r\n    id: string;\r\n    name: string;\r\n    description: string;\r\n    auditTrail!: AuditFields;\r\n    genre: string[];\r\n    languages: string[];\r\n    worksOn: string[];\r\n    enabled: boolean;\r\n    inStock: boolean;\r\n    videoId: string;\r\n    hsnNumber: string;\r\n    codAmount: number;\r\n    headerImageUrl: string;\r\n    platformDetails: PlatformDetails[];\r\n    searchPhrase: string;\r\n    sellerDetails: SellerDetails[];\r\n    images: ProductImage[] = [];\r\n    mainCategory: string;\r\n    subCategory: string;\r\n    preOrder = false;\r\n    preOrderDate: string;\r\n    constructor() {\r\n        this.id = \"\";\r\n        this.name = \"\";\r\n        this.description = \"\";\r\n        this.genre = [];\r\n        this.languages = [];\r\n        this.worksOn = [];\r\n        this.enabled = false;\r\n        this.inStock = true;\r\n        this.videoId = \"\";\r\n        this.headerImageUrl = \"\";\r\n        this.platformDetails = [];\r\n        this.sellerDetails = [];\r\n        this.searchPhrase = '';\r\n        this.hsnNumber = '';\r\n        this.codAmount = 0;\r\n        this.mainCategory = \"\";\r\n        this.subCategory = \"\";\r\n        this.preOrderDate = \"\";\r\n    }\r\n    static converter = {\r\n        toFirestore(expense: ProductInfo): firebase.firestore.DocumentData {\r\n            return classToPlain(expense);\r\n        },\r\n        fromFirestore(\r\n            snapshot: firebase.firestore.QueryDocumentSnapshot,\r\n            options: firebase.firestore.SnapshotOptions\r\n        ): ProductInfo {\r\n            const data = snapshot.data(options)!;\r\n            return plainToClass(ProductInfo, data);\r\n        }\r\n    };\r\n}","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('v-card',[_c('v-card-title',[_c('span',{staticClass:\"headline\"},[_vm._v(_vm._s(_vm.label))])]),_c('v-card-text',[_c('v-form',{ref:\"addSellerForm\"},[_c('v-row',{attrs:{\"justify\":\"start\",\"align\":\"center\"}},[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\",\"sm\":\"6\",\"align-self\":\"start\"}},[_c('v-autocomplete',{attrs:{\"items\":_vm.searchItems,\"loading\":_vm.isProductLoading,\"search-input\":_vm.search,\"clearable\":\"\",\"light\":\"\",\"item-text\":\"name\",\"item-value\":\"id\",\"label\":\"Product Name\",\"placeholder\":\"Start typing to Search\",\"prepend-icon\":\"mdi-database-search\",\"no-data-text\":\"Sorry but we couldn't find any results... :(\",\"return-object\":\"\"},on:{\"update:searchInput\":function($event){_vm.search=$event},\"update:search-input\":function($event){_vm.search=$event},\"change\":_vm.onProductChange},scopedSlots:_vm._u([{key:\"no-data\",fn:function(){return [_c('v-list-item',[_c('v-list-item-title',[_vm._v(\" Search Products \")])],1)]},proxy:true},{key:\"selection\",fn:function({ attr, on, item, selected }){return [_c('v-chip',_vm._g(_vm._b({staticClass:\"white--text\",attrs:{\"input-value\":selected,\"color\":\"blue-grey\"}},'v-chip',attr,false),on),[_c('v-icon',{attrs:{\"left\":\"\"}},[_vm._v(\" mdi-bitcoin \")]),_c('span',{domProps:{\"textContent\":_vm._s(item.name)}})],1)]}},{key:\"item\",fn:function({ item }){return [_c('v-list-item-avatar',{staticClass:\"text-h5 font-weight-light white--text\",attrs:{\"color\":\"indigo\"}},[_c('img',{attrs:{\"src\":item.headerImageUrl}})]),_c('v-list-item-content',[_c('v-list-item-title',{domProps:{\"textContent\":_vm._s(item.name)}})],1)]}}]),model:{value:(_vm.selectedProductId),callback:function ($$v) {_vm.selectedProductId=$$v},expression:\"selectedProductId\"}})],1),(_vm.isProductAvailable)?_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\",\"sm\":\"6\",\"align-self\":\"center\"}},[_c('v-select',{attrs:{\"prepend-icon\":\"mdi-store\",\"label\":\"Sellers\",\"outlined\":\"\",\"items\":_vm.sellerList,\"item-text\":\"sellerInfo.name\",\"item-value\":\"id\",\"loader-height\":\"4\",\"return-object\":\"\",\"single-line\":\"\",\"required\":\"\",\"rules\":[(v) => !!v || 'Seller is required']},on:{\"change\":_vm.fetchKeys},scopedSlots:_vm._u([{key:\"item\",fn:function({ item }){return [_c('v-list-item-avatar',{staticClass:\"text-h5 font-weight-light white--text\",attrs:{\"color\":\"indigo\"}},[_c('img',{attrs:{\"src\":item.sellerInfo.logoUrl}})]),_c('v-list-item-content',[_c('v-list-item-title',{domProps:{\"textContent\":_vm._s(item.sellerInfo.name)}})],1)]}}],null,false,1567772100),model:{value:(_vm.selectedSeller),callback:function ($$v) {_vm.selectedSeller=$$v},expression:\"selectedSeller\"}})],1):_vm._e()],1)],1),_c('v-row',{attrs:{\"justify\":\"start\",\"align\":\"center\"}},[_c('v-col',{attrs:{\"cols\":\"12\",\"align-self\":\"start\"}},[_c('v-data-table',{staticClass:\"elevation-1\",attrs:{\"headers\":_vm.headers,\"items\":_vm.keyList,\"loading\":_vm.isKeysLoading},scopedSlots:_vm._u([{key:\"top\",fn:function(){return [_c('v-toolbar',{attrs:{\"flat\":\"\"}},[_c('v-toolbar-title',[_vm._v(\"Key Details\")]),_c('v-spacer'),(_vm.isProductAvailable)?_c('v-btn',{attrs:{\"color\":\"primary\"},on:{\"click\":_vm.addKey}},[_vm._v(\" Add Key \")]):_vm._e()],1)]},proxy:true},{key:`item.auditTrail.createdOn`,fn:function({ item }){return [_c('span',[_vm._v(_vm._s(new Date(item.auditTrail.createdOn).toLocaleString()))])]}},{key:`item.redeemed`,fn:function({ item }){return [_c('v-chip',{attrs:{\"color\":_vm.getColor(item.redeemed),\"dark\":\"\"}},[_vm._v(\" \"+_vm._s(item.redeemed ? \"Redeemed\" : \"Not Redeemed\")+\" \")])]}},{key:`item.actions`,fn:function({ item }){return [_c('v-icon',{staticClass:\"mr-2\",attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.editItem(item)}}},[_vm._v(\" mdi-pencil \")]),_c('v-icon',{attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.deleteItem(item)}}},[_vm._v(\" mdi-delete \")])]}}],null,true)})],1)],1),_c('v-dialog',{attrs:{\"max-width\":\"50%\"},model:{value:(_vm.keyDialog),callback:function ($$v) {_vm.keyDialog=$$v},expression:\"keyDialog\"}},[_c('v-card',[_c('v-card-title',[_c('span',{staticClass:\"headline\"},[_vm._v(_vm._s(_vm.formTitle))])]),_c('v-card-text',[_c('v-container',[_c('v-form',{ref:\"form\",attrs:{\"lazy-validation\":\"\"}},[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"12\",\"md\":\"6\"}},[_c('v-text-field',{attrs:{\"label\":\"Product ID\",\"outlined\":\"\",\"readonly\":\"\",\"dense\":\"\"},model:{value:(_vm.editedItem.productId),callback:function ($$v) {_vm.$set(_vm.editedItem, \"productId\", $$v)},expression:\"editedItem.productId\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"12\",\"md\":\"6\"}},[_c('v-text-field',{attrs:{\"label\":\"Seller ID\",\"outlined\":\"\",\"readonly\":\"\",\"dense\":\"\"},model:{value:(_vm.editedItem.sellerInfoId),callback:function ($$v) {_vm.$set(_vm.editedItem, \"sellerInfoId\", $$v)},expression:\"editedItem.sellerInfoId\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"12\",\"md\":\"6\"}},[_c('v-text-field',{attrs:{\"rules\":[(v) => !!v || 'key is required'],\"label\":\"Key\",\"outlined\":\"\",\"dense\":\"\"},model:{value:(_vm.editedItem.key),callback:function ($$v) {_vm.$set(_vm.editedItem, \"key\", $$v)},expression:\"editedItem.key\"}})],1)],1)],1)],1)],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"blue darken-1\",\"text\":\"\"},on:{\"click\":_vm.close}},[_vm._v(\" Cancel \")]),_c('v-btn',{attrs:{\"color\":\"blue darken-1\",\"text\":\"\"},on:{\"click\":_vm.save}},[_vm._v(\" Save \")])],1)],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import 'es6-shim';\r\nimport 'reflect-metadata';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { AuditFields } from './AuditFields';\r\nimport { classToPlain, plainToClass } from 'class-transformer';\r\n\r\nexport default class KeyDetails {\r\n    id: string;\r\n    sellerInfoId: string;\r\n    sellerId: string;\r\n    productId: string;\r\n    redeemed = false;\r\n    redeemedBy: string;\r\n    orderId: string;\r\n    sellerName: string;\r\n    expirable = false;\r\n    expiryDate: number;\r\n    key: string;\r\n    redeemedAt: number;\r\n    cartItemId: string\r\n    auditTrail!: AuditFields;\r\n    public constructor() {\r\n        this.id = uuidv4();\r\n        this.sellerInfoId = '';\r\n        this.sellerId = '';\r\n        this.productId = '';\r\n        this.redeemedBy = '';\r\n        this.orderId = '';\r\n        this.sellerName = '';\r\n        this.expiryDate = 0;\r\n        this.key = \"\";\r\n        this.redeemedAt = 0;\r\n        this.cartItemId = '';\r\n    }\r\n    static converter = {\r\n        toFirestore(expense: KeyDetails): firebase.firestore.DocumentData {\r\n            return classToPlain(expense);\r\n        },\r\n        fromFirestore(\r\n            snapshot: firebase.firestore.QueryDocumentSnapshot,\r\n            options: firebase.firestore.SnapshotOptions\r\n        ): KeyDetails {\r\n            const data = snapshot.data(options)!;\r\n            return plainToClass(KeyDetails, data);\r\n        }\r\n    };\r\n}\r\n\r\n","import { Component, Prop, Vue, Watch } from \"vue-property-decorator\";\r\n\r\nimport store from '@/store';\r\nimport { firestore, auth } from '@/firebaseInit';\r\nimport { SellerInfo } from '@/dto/SellerInfo';\r\nimport { AuditFields } from '@/dto/AuditFields';\r\nimport { FirestoreService } from '@/services/FirestoreService';\r\nimport Swal from 'sweetalert2';\r\nimport { UtilityService } from '@/services/UtilityService';\r\nimport { triggerThreadSafeValidation } from 'vee-validate/dist/types/components/common';\r\nimport SellerDetails from \"@/dto/SellerDetails\";\r\nimport { ProductType } from \"@/dto/ProductType\";\r\nimport { ProductInfo } from \"@/dto/ProductInfo\";\r\nimport KeyDetails from \"@/dto/KeyDetails\";\r\n\r\n@Component\r\nexport default class AddViewKey extends Vue {\r\n  isProductAvailable = false;\r\n  label = \"Key Management\";\r\n  searchItems: ProductInfo[] = [];\r\n  isProductLoading = false;\r\n  selectedProductId = \"\";\r\n  search = \"\";\r\n  selectedProduct: any = undefined;\r\n  selectedSeller: any = undefined;\r\n\r\n  sellerList = [];\r\n  keyList: KeyDetails[] = [];\r\n  isKeysLoading = false;\r\n  keyDialog = false;\r\n  dialogDelete = false;\r\n  editedItem: KeyDetails = new KeyDetails();\r\n  editIndex = -1;\r\n  headers: any = [\r\n    { text: 'Date Added', value: 'auditTrail.createdOn' },\r\n    { text: 'Product ID', value: 'productId' },\r\n    { text: 'Seller ID', value: 'sellerInfoId' },\r\n    { text: 'is redeemed', value: 'redeemed' },\r\n    { text: 'Order id', value: 'orderId' },\r\n    { text: 'Redeemed By', value: 'redeemedBy', sortable: false },\r\n    { text: 'actions', value: 'actions', sortable: false },\r\n  ]\r\n  @Watch(\"search\")\r\n  async onPropertyChanged(value: string, oldValue: string) {\r\n    try {\r\n      if (value && value !== \"\" && value.length >= 3) {\r\n        this.isProductLoading = true;\r\n        const snapshot = await FirestoreService.getdocsStartingWithKey(\r\n          \"products\",\r\n          value.toLowerCase(),\r\n          \"searchPhrase\",\r\n          ProductInfo.converter\r\n        );\r\n        if (!snapshot.empty) {\r\n          snapshot.forEach((doc: any) => {\r\n            this.searchItems.push(doc.data());\r\n          });\r\n          //    Vue.toasted.show('Found ' + this.searchItems.length + ' items', { icon: 'face', type: 'success' });\r\n        } else {\r\n          //Vue.toasted.show('No results found', { icon: 'face', type: 'error' });\r\n        }\r\n      }\r\n    } catch (error) {\r\n      Vue.toasted.show(error.message, { icon: \"face\", type: \"error\" });\r\n    } finally {\r\n      this.isProductLoading = false;\r\n    }\r\n  }\r\n  async mounted() {\r\n    console.log(\"mounted\")\r\n  }\r\n  async validateForm() {\r\n    if ((this.$refs.addSellerForm as Vue & { validate: () => boolean }).validate()) {\r\n\r\n    }\r\n  }\r\n  resetForm() {\r\n    (this.$refs.addSellerForm as Vue & { reset: () => boolean }).reset();\r\n  }\r\n  async fetchKeys(item: SellerDetails) {\r\n    if (item) {\r\n      await this.getKeyDetails();\r\n    }\r\n\r\n  }\r\n  getColor(type: boolean) {\r\n    if (type === true) return 'red'\r\n    else return 'green'\r\n  }\r\n\r\n  async addKey() {\r\n    this.editedItem = new KeyDetails();\r\n    this.editedItem.sellerInfoId = this.selectedSeller.sellerInfo.id;\r\n    this.editedItem.productId = this.selectedProduct.id;\r\n    this.editedItem.sellerId = this.selectedSeller.id;\r\n    this.editedItem.sellerName = this.selectedSeller.sellerInfo.name;\r\n\r\n    this.editIndex = -1;\r\n    this.keyDialog = true\r\n  }\r\n\r\n  cancelEdit() {\r\n    this.$store.commit('setAddSellerPanel', false)\r\n  }\r\n\r\n  onProductChange(item: any) {\r\n    if (item !== null) {\r\n      this.selectedProduct = item as ProductInfo;\r\n      this.sellerList = this.selectedProduct?.sellerDetails.filter((sellerDetail: any) => sellerDetail.productTypeOffered === 'DIGITAL');\r\n      console.log(this.sellerList);\r\n      if (this.sellerList.length > 0) {\r\n        this.isProductAvailable = true;\r\n      } else {\r\n        this.isProductAvailable = false;\r\n\r\n      }\r\n    } else {\r\n      this.selectedProduct = undefined;\r\n      this.isProductAvailable = false;\r\n      this.keyList = [];\r\n      this.sellerList = [];\r\n\r\n    }\r\n  }\r\n\r\n  async getKeyDetails() {\r\n    try {\r\n      this.keyList = [];\r\n      this.isKeysLoading = true;\r\n      const snapshot = await firestore\r\n        .collection('keys')\r\n        .withConverter(KeyDetails.converter)\r\n        .where('productId', \"==\", this.selectedProduct.id)\r\n        .where('sellerId', \"==\", this.selectedSeller.id)\r\n        .limit(20)\r\n        .get();\r\n      if (!snapshot.empty) {\r\n        snapshot.forEach((doc: any) => {\r\n          this.keyList.push(doc.data());\r\n        });\r\n        Vue.toasted.show('Search complete', { icon: 'face', type: 'success' });\r\n\r\n      } else {\r\n        Vue.toasted.show('No results found', { icon: 'face', type: 'error' });\r\n      }\r\n\r\n\r\n    } catch (error) {\r\n      console.log(error)\r\n      Vue.toasted.show(error, { icon: 'face', type: 'error' });\r\n\r\n    }\r\n    finally {\r\n      this.isKeysLoading = false;\r\n    }\r\n\r\n  }\r\n  closeDelete() {\r\n    this.dialogDelete = false;\r\n    this.$nextTick(() => {\r\n      this.editedItem = new KeyDetails();\r\n      this.editIndex = -1\r\n    })\r\n  }\r\n  close() {\r\n    this.keyDialog = false\r\n    this.$nextTick(() => {\r\n      this.editedItem = new KeyDetails();\r\n      this.editIndex = -1\r\n    })\r\n  }\r\n  deleteItemConfirm() {\r\n    this.keyList.splice(this.editIndex, 1)\r\n    this.closeDelete()\r\n  }\r\n  get formTitle() {\r\n    return this.editIndex === -1 ? 'New Key' : 'Edit Key'\r\n  }\r\n  async save() {\r\n    if ((this.$refs.form as Vue & { validate: () => boolean }).validate()) {\r\n      try {\r\n        const dateNow = new Date();\r\n        let auditfield: AuditFields;\r\n        if (this.editIndex === -1) {\r\n          auditfield = {\r\n            createdBy: { uid: auth.currentUser?.uid, name: auth.currentUser?.displayName, email: auth.currentUser?.email },\r\n            createdOn: dateNow.getTime()\r\n          }\r\n        } else {\r\n          auditfield = this.editedItem.auditTrail;\r\n          auditfield.updatedBy = { uid: auth.currentUser?.uid, name: auth.currentUser?.displayName, email: auth.currentUser?.email }\r\n          auditfield.updatedOn = dateNow.getTime()\r\n        }\r\n\r\n        this.editedItem.auditTrail = auditfield;\r\n\r\n        const res = await firestore.runTransaction(async t => {\r\n          const keyRef = firestore.collection('keys').doc(this.editedItem.id).withConverter(KeyDetails.converter);\r\n          t.set(keyRef, this.editedItem, { merge: true });\r\n        }\r\n        );\r\n        Vue.toasted.show('key added', { icon: 'face', type: 'success' });\r\n        (this.$refs.form as Vue & { resetValidation: () => boolean }).resetValidation();\r\n        await this.getKeyDetails();\r\n        this.close();\r\n      } catch (error) {\r\n        console.log(error)\r\n        Vue.toasted.show(error, { icon: 'face', type: 'error' });\r\n\r\n      }\r\n      finally {\r\n        this.isKeysLoading = false;\r\n      }\r\n\r\n    }\r\n  }\r\n  editItem(item: KeyDetails) {\r\n    this.editIndex = this.keyList.indexOf(item)\r\n    this.editedItem = Object.assign({}, item)\r\n    this.keyDialog = true\r\n  }\r\n\r\n\r\n  async deleteItem(item: KeyDetails) {\r\n    try {\r\n      const res = await Swal.fire({\r\n        title: 'Are you sure?',\r\n        text: \"You won't be able to revert this!\",\r\n        icon: 'warning',\r\n        showCancelButton: true,\r\n        confirmButtonColor: '#3085d6',\r\n        cancelButtonColor: '#d33',\r\n        confirmButtonText: 'Yes, delete it!',\r\n\r\n      });\r\n      if (res.isConfirmed) {\r\n        await FirestoreService.deleteDocument(`keys`, item.id);\r\n        const deleteIndex = this.keyList.indexOf(item)\r\n\r\n        this.keyList.splice(deleteIndex, 1)\r\n        Swal.fire(\r\n          'Deleted!',\r\n          'Key has been deleted.',\r\n          'success'\r\n        )\r\n      }\r\n    } catch (error) {\r\n      Vue.toasted.show(error.message, { icon: 'face', type: 'error' });\r\n\r\n    }\r\n\r\n  }\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/eslint-loader/index.js??ref--14-0!./AddViewKey.ts?vue&type=script&lang=ts&external\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/eslint-loader/index.js??ref--14-0!./AddViewKey.ts?vue&type=script&lang=ts&external\"","import { render, staticRenderFns } from \"./AddViewKey.vue?vue&type=template&id=c4a9d31e&scoped=true\"\nimport script from \"./AddViewKey.ts?vue&type=script&lang=ts&external\"\nexport * from \"./AddViewKey.ts?vue&type=script&lang=ts&external\"\nimport style0 from \"./AddViewKey.vue?vue&type=style&index=0&id=c4a9d31e&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c4a9d31e\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddViewKey.vue?vue&type=style&index=0&id=c4a9d31e&prod&scoped=true&lang=css\""],"sourceRoot":""}