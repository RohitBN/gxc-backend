(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"0d62":function(t,e,a){t.exports=a.p+"img/fbLogo.8f6c57e9.svg"},"25e7":function(t,e,a){},3253:function(t,e,a){t.exports=a.p+"img/googleLogo.b7727941.svg"},"59e3":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var i=a("ade3"),s=(a("aaff"),a("98db"),a("84f8"));class r{constructor(){Object(i["a"])(this,"imageUrl",void 0),Object(i["a"])(this,"description",void 0),this.imageUrl="",this.description=""}}Object(i["a"])(r,"converter",{toFirestore(t){return Object(s["a"])(t)},fromFirestore(t,e){const a=t.data(e);return Object(s["b"])(r,a)}})},9953:function(t,e,a){"use strict";a("25e7")},a55b:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{attrs:{"fill-height":""}},[t.loggedIn?t._e():i("v-row",{staticClass:"mt-5",attrs:{align:"center"}},[i("v-col",{staticClass:"hidden-sm-and-down",attrs:{cols:"9",md:"6",lg:"8",xl:"8"}},[i("v-img",{attrs:{contain:"",src:t.loginImageInfo.imageUrl,"lazy-src":a("b1fd")},scopedSlots:t._u([{key:"placeholder",fn:function(){return[i("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[i("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!1,4034393411)})],1),i("v-col",{staticClass:"mx-auto",attrs:{cols:"10",sm:"6",md:"5",lg:"4",xl:"3","align-self":"center"}},[i("v-card",{staticClass:"pa-3",attrs:{tile:"",flat:"",color:t.$vuetify.breakpoint.smAndDown?"primary":"grey darken-3"}},[i("v-card-text",[i("div",{staticClass:"text-start"},[i("span",{staticClass:"text-h6 white--text font-weight-medium"},[t._v("Log In")])]),i("div",{staticClass:"text-start pb-6"},[i("span",{staticClass:"grey--text text--lighten-2"},[t._v("New user? ")]),i("span",{staticClass:"text-caption accent--text"},[i("router-link",{attrs:{to:"/register"}},[t._v("Create account")])],1)]),i("v-row",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"justify-start align-center white ma-1 mb-3 no-uppercase",on:{click:t.googleLogin}},[i("v-col",{staticClass:"text-center",attrs:{cols:"2"}},[i("v-img",{staticClass:"center mx-auto",attrs:{src:a("3253"),height:"20px",width:"20px"}})],1),i("v-col",{staticClass:"text-center",attrs:{cols:"10","align-self":"center"}},[i("span",{staticClass:"text-title black--text font-weight-bold"},[t._v("Continue with Google")])])],1),i("v-row",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"justify-start align-center fb-color ma-1 no-uppercase",on:{click:t.googleLogin}},[i("v-col",{staticClass:"text-center",attrs:{cols:"2"}},[i("v-img",{staticClass:"center mx-auto",attrs:{src:a("0d62"),height:"20px",width:"20px",contain:""}})],1),i("v-col",{staticClass:"text-center",attrs:{cols:"10","align-self":"center"}},[i("span",{staticClass:"text-title white--text font-weight-bold"},[t._v("Continue with Facebook")])])],1),i("v-row",{staticClass:"ma-1 mt-5 mb-5",attrs:{align:"center"}},[i("v-divider",{attrs:{dark:""}}),i("span",{staticClass:"text-caption grey--text ms-1 me-1"},[t._v("or")]),i("v-divider",{attrs:{dark:""}})],1),i("v-row",{attrs:{justify:"center ",dense:""}},[i("v-col",[i("v-text-field",{staticClass:"rounded-0",attrs:{"hide-details":"auto",dark:"",outlined:"",tile:"",label:"Email",height:"60px"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1)],1),i("v-row",{attrs:{justify:"center",dense:""}},[i("v-col",[i("v-text-field",{staticClass:"rounded-0",attrs:{"hide-details":"auto",dark:"",outlined:"",tile:"",type:"password",label:"Password",height:"60px"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),t.showError?i("v-row",{attrs:{justify:"center",dense:""}},[i("v-col",[i("v-fade-transition",[i("v-alert",{attrs:{type:"error"}},[t._v(" "+t._s(t.loginError)+" ")])],1)],1)],1):t._e(),i("v-row",{attrs:{justify:"center"}},[i("v-col",[i("v-btn",{staticClass:"black--text no-uppercase font-weight-bold",attrs:{tile:"",block:"",color:"accent",loading:t.loading},on:{click:t.emailLogin}},[t._v(" Log In")])],1)],1),i("v-row",{staticClass:"mt-2",attrs:{justify:"end","no-gutters":""}},[i("v-col",{staticClass:"text-right"},[i("router-link",{attrs:{to:"/register"}},[t._v("Forgot Password")])],1)],1)],1)],1)],1)],1),t.mobileValid?t._e():i("v-row",{attrs:{justify:"center",align:"center"}},[i("v-col",{attrs:{cols:"12",xs:"12",sm:"8",md:"6",lg:"4",xl:"4"}},[i("mobile-verify")],1)],1)],1)},s=[],r=a("ade3"),o=a("9ab4"),l=a("1b40"),n=a("bb3f"),c=a("c5fb"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{tile:""}},[a("v-card-title",{staticClass:"justify-center"},[t._v("Email Verification")]),a("v-divider"),a("v-card-text",[a("v-container",[a("v-form",{ref:"mobileForm",attrs:{"lazy-validation":""}},[a("v-row",{attrs:{justify:"center",align:"center",dense:""}},[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{solo:"",label:"Mobile Number","single-line":"",type:"number",clearable:"",readonly:t.mobileInputDisabled,rules:[function(t){return!!t||"Mobile Number is required"},function(t){return!!t&&10===t.length||"Mobile number must be 10 digit long"}]},on:{"click:clear":t.clearMobileInput},model:{value:t.mobileNumber,callback:function(e){t.mobileNumber=e},expression:"mobileNumber"}})],1),a("v-col",{staticClass:"text-right"},[a("v-btn",{staticClass:"black--text",attrs:{color:"accent",tile:"",loading:t.sendOTPloading,disabled:t.sendOTPBtnDisabled},on:{click:t.sendOTP}},[t._v(t._s(t.otpText))])],1)],1),a("v-row",{attrs:{justify:"center",align:"center"}},[a("v-col",[a("v-alert",{directives:[{name:"show",rawName:"v-show",value:t.showAlert,expression:"showAlert"}],attrs:{border:"left",color:"green",light:"",text:""}},[t._v(" Please enter the OTP sent on your mobile number "+t._s(t.mobileNumber)+" ")])],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"10",xl:"6"}})],1),a("v-row",{attrs:{justify:"center"}},[a("v-col",{staticClass:"text-center"},[a("v-fade-transition",[a("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.otpShow,expression:"otpShow"}],staticClass:"black--text",attrs:{color:"accent",tile:"",loading:t.otpLoading},on:{click:t.verifyOTP}},[t._v("Verify")])],1)],1)],1)],1)],1)],1)],1)},h=[],u=a("7e78"),g=a("afbc"),m=a("174f"),b=a("0613");let v=class extends l["c"]{constructor(...t){super(...t),Object(r["a"])(this,"mobileNumber",void 0),Object(r["a"])(this,"countDown",30),Object(r["a"])(this,"otpText","Send OTP"),Object(r["a"])(this,"otpShow",!1),Object(r["a"])(this,"otpValue",0),Object(r["a"])(this,"otpLoading",!1),Object(r["a"])(this,"mobileInputDisabled",!1),Object(r["a"])(this,"showAlert",!1),Object(r["a"])(this,"sendOTPloading",!1),Object(r["a"])(this,"sendOTPBtnDisabled",!1)}sendOTP(){if(this.$refs.mobileForm.validate())try{this.sendOTPBtnDisabled=!0,this.mobileInputDisabled=!0,this.showAlert=!0,this.countDownTimer(),this.handleClearInput()}catch(t){console.log(t),this.sendOTPBtnDisabled=!1,this.mobileInputDisabled=!1}}countDownTimer(){this.countDown>0?setTimeout(()=>{this.countDown-=1,this.otpText=`Please wait ${this.countDown} seconds`,this.countDownTimer()},1e3):(this.otpText="Send OTP",this.sendOTPBtnDisabled=!1)}handleOnComplete(t){console.log("OTP completed: ",t),this.otpShow=!0}handleOnChange(t){console.log("OTP changed: ",t),this.otpShow=!1}handleClearInput(){this.$refs.otpInput.clearInput()}clearMobileInput(){this.mobileInputDisabled=!1,this.handleClearInput()}async verifyOTP(){try{this.otpLoading=!0,this.sendOTPBtnDisabled=!0;const t=u["a"].currentUser;t?(await m["a"].updateDocument("users",t.uid,{mobileNumber:this.mobileNumber,mobileVerified:!0}),await n["a"].addAuthParams(t),g["a"].push("/"),b["a"].commit("setSnack","update successful")):b["a"].commit("setSnack","user not logged in")}catch(t){this.otpLoading=!1,this.sendOTPBtnDisabled=!1}finally{this.otpLoading=!1}}};Object(o["a"])([Object(l["b"])({default:""})],v.prototype,"mobileNumber",void 0),v=Object(o["a"])([l["a"]],v);var p=v,f=p,w=a("2877"),x=a("6544"),y=a.n(x),C=a("0798"),O=a("8336"),j=a("b0af"),V=a("99d9"),T=a("62ad"),E=a("a523"),I=a("ce7e"),P=a("0789"),k=a("4bd4"),D=a("0fd9"),_=a("8654"),L=Object(w["a"])(f,d,h,!1,null,null,null),N=L.exports;y()(L,{VAlert:C["a"],VBtn:O["a"],VCard:j["a"],VCardText:V["c"],VCardTitle:V["d"],VCol:T["a"],VContainer:E["a"],VDivider:I["a"],VFadeTransition:P["c"],VForm:k["a"],VRow:D["a"],VTextField:_["a"]});var S=a("59e3");let F=class extends l["c"]{constructor(...t){super(...t),Object(r["a"])(this,"loginError",""),Object(r["a"])(this,"showError",!1),Object(r["a"])(this,"email",""),Object(r["a"])(this,"password",""),Object(r["a"])(this,"loading",!1),Object(r["a"])(this,"loggedIn",!1),Object(r["a"])(this,"mobileValid",!0),Object(r["a"])(this,"emailValid",!1),Object(r["a"])(this,"loginImageInfo",new S["a"])}async mounted(){await this.getLoginImage()}async emailLogin(){try{if(this.loading=!0,this.validateFields()){var t;const e=await n["a"].signInWithEmailPassword(this.email,this.password);null!==(t=e.user)&&void 0!==t&&t.emailVerified?(this.loggedIn=!0,this.validateEmailMobile(e.user)):(this.loginError="Please verify your email",this.showError=!0)}}catch(e){this.loginError="Invalid user credentials",this.showError=!0}finally{this.loading=!1}}async validateEmailMobile(t){if(t){const e=await m["a"].getSingleDocument("users",t.uid);this.mobileValid=e.mobileVerified}}async googleLogin(){try{var t;const e=await n["a"].signIn();e&&null!==(t=e.user)&&void 0!==t&&t.emailVerified?(this.loggedIn=!0,await this.validateEmailMobile(null===e||void 0===e?void 0:e.user),this.$router.push("/")):(this.loginError="Something went wrong. Please try again",this.showError=!0)}catch(e){this.loginError="Invalid user credentials",this.showError=!0}finally{this.loading=!1}}validateFields(){const t=!0===this.validateEmail(this.email)&&!0===this.validatePassword(this.password);return t&&(this.loginError="",this.showError=!1),t}validateEmail(t){const e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t.toLowerCase());return e||(this.loginError="Enter Valid Email Address",this.showError=!0),e}validatePassword(t){const e=t.length>0;t.length;return e||(this.loginError="Password can not be empty",this.showError=!0),e}async getLoginImage(){try{const t=await m["a"].getSingleDocument("HomeScreen","loginImage",S["a"].converter);null!==t&&(this.loginImageInfo=t)}catch(t){l["c"].toasted.show("Error fetching GiftCards Details",{icon:"face",type:"error"}),console.log(t)}}};F=Object(o["a"])([Object(l["a"])({components:{MobileVerify:c["a"],EmailVerify:N}})],F);var A=F,B=A,M=(a("9953"),a("adda")),$=a("490a"),z=a("269a"),U=a.n(z),R=a("5607"),G=Object(w["a"])(B,i,s,!1,null,"67cd79e5",null);e["default"]=G.exports;y()(G,{VAlert:C["a"],VBtn:O["a"],VCard:j["a"],VCardText:V["c"],VCol:T["a"],VContainer:E["a"],VDivider:I["a"],VFadeTransition:P["c"],VImg:M["a"],VProgressCircular:$["a"],VRow:D["a"],VTextField:_["a"]}),U()(G,{Ripple:R["a"]})},b1fd:function(t,e,a){t.exports=a.p+"img/content-placeholder.f32cba2c.png"}}]);
//# sourceMappingURL=login.7db675af.js.map